Name:Duelist's Flame 
ManaCost:X R R
Types:Instant
A:SP$ Pump | ValidTgts$ Creature.blocked+YouCtrl | TgtPrompt$ Select target blocked creature you control | NumAtt$ +X | KW$ Trample | SubAbility$ DBAnimate | SpellDescription$ Until end of turn, target blocked creature you control gets +X/+0 and gains trample and "Whenever this creature deals combat damage to a player, look at that many cards from the top of your library. Exile up to one nonland card from among them and put the rest on the bottom of your library in a random order. You may cast the exiled card without paying its mana cost."
SVar:DBAnimate:DB$ Animate | Defined$ Targeted | Triggers$ DamageTrig
SVar:DamageTrig:Mode$ DamageDone | ValidSource$ Card.Self | ValidTarget$ Player | Execute$ TrigDig | CombatDamage$ True | TriggerDescription$ Whenever this creature deals combat damage to a player, look at that many cards from the top of your library. Exile up to one nonland card from among them and put the rest on the bottom of your library in a random order. You may cast the exiled card without paying its mana cost.
SVar:TrigDig:DB$ Dig | DigNum$ Y | ChangeNum$ 1 | ChangeValid$ Card.nonLand | Optional$ True | RememberChanged$ True | DestinationZone$ Exile | RestRandomOrder$ True | SubAbility$ DBCast
SVar:DBCast:DB$ Play | Valid$ Card.IsRemembered | ValidZone$ Exile | ValidSA$ Spell | WithoutManaCost$ True | Optional$ True | SubAbility$ DBCleanup
SVar:DBCleanup:DB$ Cleanup | ClearRemembered$ True
SVar:Y:TriggerCount$DamageAmount
SVar:X:Count$xPaid
Oracle:Until end of turn, target blocked creature you control gets +X/+0 and gains trample and "Whenever this creature deals combat damage to a player, look at that many cards from the top of your library. Exile up to one nonland card from among them and put the rest on the bottom of your library in a random order. You may cast the exiled card without paying its mana cost."
